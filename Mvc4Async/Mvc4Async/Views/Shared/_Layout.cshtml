<!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!--Reference the SignalR library. -->
<script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<!--SignalR script to update the chat page and send messages.-->
<script type="text/javascript">
    $(document).ready(function () {
        StartInvoicing();
    });

    function StartInvoicing()
    {
        var progressNotifier = $.connection.progressHub;

        // client-side sendMessage function that will be called from the server-side
        progressNotifier.client.sendMessage = function (message, percentage) {
            // update progress
            UpdateProgress(message, percentage);
            //alert(message);
        };

        // establish the connection to the server and start server-side operation
        $.connection.hub.start().done(function () {});
    }

// Update the progress bar
    function UpdateProgress(message, percentage) {
        $("#MyProgressBar").attr("style", "width:" + percentage + "%");
        $("#MyProgressBar").attr("aria-valuenow", percentage);
        $("#ProgressHeading").text(message);
    }
</script>

@{
    Assets.AddStyle("~/Content/css");
    Assets.AddStyle("~/Content/themes/base/css");
    Assets.AddScript("~/bundles/js");
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Assets.GetStyles()
    <script src="~/Scripts/modernizr-2.0.6-development-only.js" type="text/javascript"></script>
</head>
  
<body>
    <h2 id="ProgressHeading">Not processing</h2>
    <div class="progress">
        <div id="MyProgressBar" class="progress-bar" role="progressbar" aria-valuenow="0"
             aria-valuemin="0" aria-valuemax="100" style="width:0%">
        </div>
    </div>
@RenderBody()
@*
           @RenderPage("~/Views/Shared/_links.cshtml")
     *@
@RenderPage("~/Views/Shared/_links.cshtml")






@Assets.GetScripts()
<p>Elapsed time: @Html.Encode(ViewBag.elapsedTime) </p>
<p>Num gizmos: @Html.Encode(ViewBag.numGizmos) </p>
<p>Num widgets: @Html.Encode(ViewBag.numWidgets) </p>
<p>Num products: @Html.Encode(ViewBag.numProducts) </p>
</body>
</html>
